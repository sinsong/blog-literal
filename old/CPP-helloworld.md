---
title: C++ helloworld
date: 2018-06-08 23:47:31
tags:
- C++
---

# 非常简单的main函数，什么也不干，只是返回给操作系统一个值。

```cpp
int main()
{
	return 0;
}
```

> C++ 程序都包含一个或多个函数(function)（至少一个函数），其中一个必须命名为main。

> main()函数，C++的程序入口点。运行一个程序在语言上表现为调用main函数，main函数也就是程序开始执行的地方，main函数的结束（用return语句返回）体现为程序的结束。
> 所以，`return 0;`在main函数中，可以理解为程序结束。

> 一个函数的定义包括：返回类型(return type)、函数名(function name)、括号包围的形参列表(parameter list，允许为空)、函数体(function body)。

```cpp
int main()
```

`int`就是返回类型，`main`是函数名，`()`表示一个空的形参列表（也就是说不接收参数啦）
`int`是整型的意思。
意思是：函数的名字是main，参数为空，返回一个整型变量。

接下来紧跟的是函数体

```cpp
{
	return 0;
}
```
以左花括号开始，右花括号结束（用花括号括起来的啦），构成一个语句块(block of statements)。这个语句块充当函数体，那么里面的所有语句都属于main的函数体啦，也就是里面的语句就属于main函数哟！

语句：
```cpp
return 0;
```

> 语句以分号;结尾

> 编程语言的语法中所用的符号，基本上都是英文符号。
> 注意中文标点和英文标点的区别（特别是中文空格和英文空格的区别！！！很严肃的！！！）

`return`用来结束函数的执行。main函数的结束代表着程序的结束。
`return`向调用者返回一个值，就是`0`。

> `return`返回的值必须与该函数的返回类型相容。

> main函数的返回值，返回给操作系统的。

> 一般情况下，程序正常退出的返回值是0。（main返回0）

# Hello, world

给出一个简单的例子。

```cpp
//这一行是注释哟

#include<iostream> //包含头文件（这样可以使用语言定义的功能）

int main() //程序入口点
{
	std::cout<<"Hello, world!";	//输出Hello, world!
	std::cout<<std::endl;		//刷新缓冲区，然后换行。
	return 0;			//程序结束
}
```

# 编译，运行

计算机的不能直接执行高级语言的代码的。计算机直接执行的是机器语言的代码。编译器，就是用来将高级语言代码翻译为机器代码（通常是汇编）。

程序代码通常被称为源文件(source file,src)，C++源文件的扩展名通常为：.cpp .cc .cxx .cp .C

编译器通常使用命令行界面。。。（所以双击不会弹窗的）
这时需要打开命令行界面！
* Windows有命令提示符和PowerShell
* 类Unix系统（如Linux），终端就是。

## 使用Windows上命令提示符，使用编译器

这里假定提示符是\>，编译器的命令是cl，源文件叫做main.cpp

使用命令：
```bat
> cl main.cpp
```
没错，简单程序的话，直接将源文件名字当参数就行。
将生成可执行文件main.exe。

现在就可以运行我们刚编写的程序了。

```bat
> main
```

Windows上，运行程序可以忽略扩展名.exe
就是说一个可执行文件叫做prog.exe，那么命令可以写为prog

Windows上这么查看程序运行状态（最近一次运行程序的状态（返回值））
```bat
> echo %ERRORLEVEL%
```

## 类Unix系统上，使用编译器

假设系统提示符是$，编译器叫CC，源文件叫main.cpp

编译
```sh
$ CC main.cpp
```

生成可执行文件a.out（默认行为），类Unix系统的编译器默认生成a.out，使用编译器的参数来指定生成的可执行文件的名字。

```sh
$ CC -o m main.cpp
```
将生成可执行文件m，没有扩展名哟！

运行程序

```sh
$ ./a.out
```

类Unix系统中，需要显式的指出文件的位置。（不在Path变量中）
而且类Unix系统中，运行程序需要指出程序文件的全名，包括文件扩展名。
不在Path中还要路径（文件的位置）

> `./`是相对路径，表示当前目录（相对于工作目录）。


