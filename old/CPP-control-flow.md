---
title: C++ 控制流
date: 2018-06-12 21:09:49
tags:
- C++
---

语句一般是顺序执行的：语句块的第一条语句首先执行，然后是第二条语句，以此类推。
我们还需要其他更复杂的执行路径。
程序设计语言提供了多种不同的控制流语句，允许我们写出更为复杂的执行路径。

# while 语句

```cpp
while (condition)
	statement
```

应该和其他书中不太一样。是不是很好奇while的圆括号()后面应该跟一对大括号{}才对？
while的循环体是单语句的时候，可以直接跟在条件后面，简写一下。
不过记住，循环体只有一个语句，不要被缩进和空语句坑了。

```cpp
//坑1
while ( a < 100 ) ++a; // "a++"就是循环体
	std::cout << a; //这条语句根本就不在循环体里面！

//坑2
while ( a < 100 ); //循环体是空语句！！！
	std::cout << a; //这条语句根本就不在循环体里面！

; //萌萌哒空语句
; //又是一个空语句
```

> 使用空语句时，一定要用注释标记一下，免得坑人！

正常的while语句

```cpp
while (condition)
{
	statements
	...
}
```

while是关键字，condition是条件表达式（和语句类似，不过要求能求出值），statement或者语句块中的statements都可以算作循环体，不过要紧跟在while的条件表达式的括号后面。

```cpp
//无缘无故写一个语句块也是可以的

//就是个语句块而已，依然顺序执行
{
	//语句块
	//用来研究变量生命周期是个不错的选择
	C c;//类C的实例
} // c被析构

//这里暂停一下
std::getchar();
//插入一些输出语句，这里就能轻松观测到。
```

while语句的执行过程就是交替的检测condition条件和执行关联的循环体，直到condition为假时，跳出循环。

执行到while语句
对condition条件表达式求值，如果为假，直接跳出循环。（循环体就不执行了）。
如果为真，执行循环体一次，然后再判断，直到条件为假，跳出循环。
先判断，再执行，遇到condition为假的情况就跳出循环。

# for 语句

专门用于检测变量，在循环体中递增变量的循环模式。for语句用于简化这种模式。

```cpp
for (init;cond;iter)
	statement

for (init;cond;iter)
{
	statements
	...
}
```

和while一样，for的循环体也可以是单语句或者语句块。
不严格的说，控制流都这样。（循环体，条件分支等）

for是关键字，后面小括号里面就比较复杂了。
init是初始化语句（和分号一起）。可以是空语句，简单声明，分号必须有。
cond是条件语句（和分号一起）。结果要能隐式转换到bool的表达式语句。
iter是迭代表达式。每次迭代，紧随循环体后求值。一般用来递增循环变量。

首先，执行初始化语句，然后判断条件。
条件为假跳出循环，条件为真则执行循环体，然后执行迭代表达式。
然后判断条件，同上。

与while不一样的是循环开始前执行初始化语句，循环过程中，如果条件为真，执行完循环体，接着执行一个迭代表达式，然后接着判断，进行下一次循环。

判断一次条件，直到下一次判断条件前，称为一次循环。（自己下的定义）
条件的值使得循环体不被执行，以至于跳出循环语句，不算做一次循环。（自己下的定义）
跳出循环，表示离开该循环语句，按照顺序执行规则执行该循环语句外的语句。也称为该循环跳出。

for语句初始化语句中定义的变量，作用域仅在for语句中。for语句以外，该变量离开作用域（不能使用）。

```cpp
for (int a = 0 ; a < 100 ; ++a)
{
	std::cout<< a;
}
```

其中，`a++`中的`++`是递增运算符，意思是该变量的值加上1。（a = a + 1的简写）

用来输出 0 - 99 ，不好意思，a = 100时跳出循环，所以循环体被执行100次！

# if 语句

用于支持条件执行。

```cpp
if (condition)
	statement

if (condition)
{
	statements
	...
}
```

if是关键字，condition是条件表达式。

判断条件，如果条件为真，执行statement。
如果条件为假，直接跳出if语句。

if-else

```cpp
if (condition)
	statement1
else
	statement2

if (condition)
{
	statement1
}
else
{
	statement2
}
```

判断条件，如果条件为真，执行statement1。
如果条件为假，执行statement2。

这样给两种情况都做出反应，condition一般就两种情况。

不过，如果我们只需要处理else的情况怎么办？
使用!运算符，是的condition的结果反转，这样就能指出来else的情况。
```cpp
if (!condition)
	statement
```
还要注意!运算符的优先级!确保最后参与计算的真的是结果的反转。
